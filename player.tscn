[gd_scene load_steps=56 format=3 uid="uid://b4djs5yvwadac"]

[ext_resource type="Script" path="res://player.cs" id="1_x7hwy"]
[ext_resource type="PackedScene" uid="uid://de02ggtfbw366" path="res://assets/3DGodotRobot.glb" id="2_n58eb"]
[ext_resource type="Material" uid="uid://br6p3wifwdmhn" path="res://transparentplayershader.tres" id="3_jwmgk"]
[ext_resource type="Script" path="res://StateMachine.cs" id="3_n2ags"]
[ext_resource type="Material" uid="uid://d18vttaokc2ig" path="res://assets/Material.002.tres" id="4_27igw"]
[ext_resource type="Script" path="res://PlayerGrounded.cs" id="4_d1kly"]
[ext_resource type="Script" path="res://PlayerFalling.cs" id="5_43yp8"]
[ext_resource type="Script" path="res://PlayerRolling.cs" id="6_q81j6"]
[ext_resource type="Script" path="res://PlayerDiving.cs" id="7_5jmgu"]
[ext_resource type="Script" path="res://PlayerWallSliding.cs" id="10_2260g"]
[ext_resource type="PackedScene" uid="uid://onhapgqgx0qt" path="res://camera.tscn" id="10_k4kc6"]
[ext_resource type="Script" path="res://AirDive.cs" id="11_s8qvs"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_dsk1a"]
radius = 0.387151
height = 1.79243

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_raa5u"]
radius = 0.387
height = 0.796634

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_t6yvb"]
animation = &"Dive"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qn8tk"]
animation = &"Fall2"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_3u626"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_5irfq"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_qn8tk")
nodes/Animation/position = Vector2(221.74, 114.85)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_3u626")
nodes/TimeScale/position = Vector2(380, 100)
nodes/output/position = Vector2(560, 140)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4uidt"]
animation = &"Fall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hovue"]
xfade_time = 3.0
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rvj8s"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_5qxld"]
states/BlendTree/node = SubResource("AnimationNodeBlendTree_5irfq")
states/BlendTree/position = Vector2(377, 43)
states/Fall/node = SubResource("AnimationNodeAnimation_4uidt")
states/Fall/position = Vector2(541, 100)
states/Start/position = Vector2(201, 100)
transitions = ["BlendTree", "Fall", SubResource("AnimationNodeStateMachineTransition_hovue"), "Start", "BlendTree", SubResource("AnimationNodeStateMachineTransition_rvj8s")]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_oa0f5"]
animation = &"Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cx28e"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4yv8h"]
animation = &"Jump2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_80d3q"]
animation = &"Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p8e01"]
animation = &"Jump2"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eef4q"]
xfade_time = 0.5
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_u6lut"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_voxp7"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_3nwqv"]
states/End/position = Vector2(600, 100)
states/Fall/node = SubResource("AnimationNodeAnimation_80d3q")
states/Fall/position = Vector2(448, 100)
states/Jump2/node = SubResource("AnimationNodeAnimation_p8e01")
states/Jump2/position = Vector2(322, 95)
transitions = ["Jump2", "Fall", SubResource("AnimationNodeStateMachineTransition_eef4q"), "Start", "Jump2", SubResource("AnimationNodeStateMachineTransition_u6lut"), "Fall", "End", SubResource("AnimationNodeStateMachineTransition_voxp7")]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6gq8h"]
animation = &"GroundSlide"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_pd42c"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_boua7"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_6gq8h")
nodes/Animation/position = Vector2(80, 80)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_pd42c")
nodes/TimeScale/position = Vector2(281, 102)
nodes/output/position = Vector2(440, 120)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6rxvw"]
animation = &"Run"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_kim1i"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ibgos"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_6rxvw")
nodes/Animation/position = Vector2(140, 60)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_kim1i")
nodes/TimeScale/position = Vector2(360, 80)
nodes/output/position = Vector2(680, 60)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ojpj8"]
animation = &"Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uysum"]
animation = &"Jump3"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_w48u8"]
advance_mode = 2

[sub_resource type="Curve" id="Curve_u6xm5"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.38835, 0), 0.0, 0.0, 0, 0, Vector2(0.970874, 1), 0.260211, 0.0, 0, 0]
point_count = 3

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wktnb"]
xfade_time = 2.0
xfade_curve = SubResource("Curve_u6xm5")
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gr052"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_imgtg"]
states/Fall/node = SubResource("AnimationNodeAnimation_ojpj8")
states/Fall/position = Vector2(606, 100)
states/Jump3/node = SubResource("AnimationNodeAnimation_uysum")
states/Jump3/position = Vector2(352, 100)
transitions = ["Start", "Jump3", SubResource("AnimationNodeStateMachineTransition_w48u8"), "Jump3", "Fall", SubResource("AnimationNodeStateMachineTransition_wktnb"), "Fall", "End", SubResource("AnimationNodeStateMachineTransition_gr052")]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_oh172"]
animation = &"Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jjsq7"]
animation = &"WallJump"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0g35u"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x1ik5"]
xfade_time = 0.5
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2ux37"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_2h3i2"]
states/Fall/node = SubResource("AnimationNodeAnimation_oh172")
states/Fall/position = Vector2(548, 102)
states/WallJump/node = SubResource("AnimationNodeAnimation_jjsq7")
states/WallJump/position = Vector2(389, 104)
transitions = ["Start", "WallJump", SubResource("AnimationNodeStateMachineTransition_0g35u"), "WallJump", "Fall", SubResource("AnimationNodeStateMachineTransition_x1ik5"), "Fall", "End", SubResource("AnimationNodeStateMachineTransition_2ux37")]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xvpvp"]
animation = &"WallSlide"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vgvpf"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_l7fct"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_btn1g"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_aa8f1"]
states/AirDive/node = SubResource("AnimationNodeAnimation_t6yvb")
states/AirDive/position = Vector2(460, 200.76)
states/Dive/node = SubResource("AnimationNodeStateMachine_5qxld")
states/Dive/position = Vector2(460, 145)
states/Fall/node = SubResource("AnimationNodeAnimation_oa0f5")
states/Fall/position = Vector2(856, 153)
states/Idle/node = SubResource("AnimationNodeAnimation_cx28e")
states/Idle/position = Vector2(214, 6)
states/Jump/node = SubResource("AnimationNodeAnimation_4yv8h")
states/Jump/position = Vector2(340, 153)
states/JumpTransition/node = SubResource("AnimationNodeStateMachine_3nwqv")
states/JumpTransition/position = Vector2(675, 220)
states/Roll/node = SubResource("AnimationNodeBlendTree_boua7")
states/Roll/position = Vector2(374, 87)
states/Run/node = SubResource("AnimationNodeBlendTree_ibgos")
states/Run/position = Vector2(374, 6)
states/Start/position = Vector2(57, 138)
states/TallJumpTransition/node = SubResource("AnimationNodeStateMachine_imgtg")
states/TallJumpTransition/position = Vector2(960.951, 220)
states/WallJumpTransition/node = SubResource("AnimationNodeStateMachine_2h3i2")
states/WallJumpTransition/position = Vector2(650, 145)
states/WallSlide/node = SubResource("AnimationNodeAnimation_xvpvp")
states/WallSlide/position = Vector2(569, 87)
transitions = ["WallJumpTransition", "Fall", SubResource("AnimationNodeStateMachineTransition_vgvpf"), "JumpTransition", "Fall", SubResource("AnimationNodeStateMachineTransition_l7fct"), "TallJumpTransition", "Fall", SubResource("AnimationNodeStateMachineTransition_btn1g")]
graph_offset = Vector2(-84.0493, 57.7596)

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("_AnimationTree")]
floor_constant_speed = true
floor_snap_length = 0.85
script = ExtResource("1_x7hwy")
_AnimationTree = NodePath("AnimationTree")

[node name="Pivot" type="Node3D" parent="."]

[node name="Character" parent="Pivot" instance=ExtResource("2_n58eb")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, -0.8, 0)

[node name="Skeleton3D" parent="Pivot/Character/RobotArmature" index="0"]
bones/0/position = Vector3(-3.5256e-16, 0.861288, 0.0298551)
bones/0/rotation = Quaternion(0.722618, 8.24031e-08, 8.61428e-08, 0.691247)
bones/1/rotation = Quaternion(0.002259, -7.42462e-15, 5.38589e-10, 0.999997)
bones/4/position = Vector3(2.8056e-14, 0.151501, -0.011741)
bones/4/rotation = Quaternion(-0.269951, -1.14783e-07, 3.21807e-08, 0.962874)
bones/5/rotation = Quaternion(-0.432784, -6.90004e-14, 1.03184e-07, 0.901498)
bones/8/position = Vector3(9.97907e-08, 0.0611575, 0.418553)
bones/9/rotation = Quaternion(-0.571079, -0.556854, 0.439094, -0.413496)
bones/10/rotation = Quaternion(-0.356441, 0.617847, -0.433107, 0.551029)
bones/12/rotation = Quaternion(0.0209349, 0.0170217, -0.0176714, 0.99948)
bones/13/rotation = Quaternion(-0.571079, 0.556854, -0.439094, -0.413496)
bones/14/rotation = Quaternion(-0.356441, -0.617847, 0.433107, 0.551029)
bones/16/rotation = Quaternion(0.0209349, -0.0170217, 0.0176714, 0.99948)
bones/17/rotation = Quaternion(0.996647, 0.0688627, 0.00237967, 0.044122)
bones/18/rotation = Quaternion(0.0996995, 0.00778531, 0.0263047, 0.994639)
bones/19/rotation = Quaternion(-0.14418, 0.000587101, -0.00582002, 0.989534)
bones/21/rotation = Quaternion(0.994654, -0.0689025, -0.000110545, 0.0769164)
bones/23/rotation = Quaternion(-0.0926899, -0.000284834, 0.00584663, 0.995678)

[node name="Bottom" parent="Pivot/Character/RobotArmature/Skeleton3D" index="0"]
surface_material_override/0 = ExtResource("3_jwmgk")

[node name="Chest" parent="Pivot/Character/RobotArmature/Skeleton3D" index="1"]
surface_material_override/0 = ExtResource("3_jwmgk")

[node name="Face" parent="Pivot/Character/RobotArmature/Skeleton3D" index="2"]
surface_material_override/0 = ExtResource("3_jwmgk")
surface_material_override/1 = ExtResource("4_27igw")

[node name="Llimbs and head" parent="Pivot/Character/RobotArmature/Skeleton3D" index="3"]
surface_material_override/0 = ExtResource("3_jwmgk")

[node name="StandardCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.089457, 0)
shape = SubResource("CapsuleShape3D_dsk1a")

[node name="RollCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.411, 0)
shape = SubResource("CapsuleShape3D_raa5u")
disabled = true

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("_InitialState")]
script = ExtResource("3_n2ags")
_InitialState = NodePath("Grounded")

[node name="Grounded" type="Node" parent="StateMachine" node_paths=PackedStringArray("_Player", "_Camera")]
script = ExtResource("4_d1kly")
_Player = NodePath("../..")
_Camera = NodePath("../../CameraPivot")

[node name="Falling" type="Node" parent="StateMachine" node_paths=PackedStringArray("_Player", "_Camera")]
script = ExtResource("5_43yp8")
_Player = NodePath("../..")
_Camera = NodePath("../../CameraPivot")

[node name="Rolling" type="Node" parent="StateMachine" node_paths=PackedStringArray("_Player", "_Pivot", "_StandardCollider", "_RollingCollider")]
script = ExtResource("6_q81j6")
_Player = NodePath("../..")
_Pivot = NodePath("../../Pivot")
_StandardCollider = NodePath("../../StandardCollider")
_RollingCollider = NodePath("../../RollCollider")

[node name="Diving" type="Node" parent="StateMachine" node_paths=PackedStringArray("_Player", "_Camera")]
script = ExtResource("7_5jmgu")
_Player = NodePath("../..")
_Camera = NodePath("../../CameraPivot")

[node name="WallSlide" type="Node" parent="StateMachine" node_paths=PackedStringArray("_Player")]
script = ExtResource("10_2260g")
_Player = NodePath("../..")

[node name="AirDive" type="Node" parent="StateMachine"]
script = ExtResource("11_s8qvs")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_aa8f1")
anim_player = NodePath("../Pivot/Character/AnimationPlayer")
active = true
parameters/Dive/BlendTree/TimeScale/scale = 2.0
parameters/Roll/TimeScale/scale = 1.0
parameters/Run/TimeScale/scale = 1.0

[node name="CameraPivot" parent="." instance=ExtResource("10_k4kc6")]

[editable path="Pivot/Character"]
[editable path="CameraPivot"]
